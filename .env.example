# VS Code Favicon Service Configuration
# Copy this file to .env and customize for your environment

# ============================================
# Server Configuration
# ============================================

# Port for the unified service (generates and serves favicons, notifications, etc.)
SERVICE_PORT=8090

# Node environment (development, production, test, staging)
NODE_ENV=development

# ============================================
# Paths Configuration
# ============================================

# Path to projects registry JSON file
REGISTRY_PATH=/opt/registry/projects.json

# Comma-separated list of allowed base paths for security
# Only projects within these directories can be accessed
ALLOWED_PATHS=/opt/dev,/opt/prod,/opt/research

# Directory for service data and persistent storage
DATA_DIR=/opt/data/vscode-favicon

# ============================================
# CORS Configuration (SECURITY CRITICAL)
# ============================================

# Comma-separated list of allowed CORS origins
# SECURITY: Only add origins you control and trust
# NO wildcards (*) allowed - explicit origins only
# Format: protocol://domain:port (exact match required)
CORS_ORIGINS=https://vs.noreika.lt,https://favicon-api.noreika.lt,http://localhost:8080,http://192.168.110.199:8080,http://192.168.110.199:8091

# Production example:
# CORS_ORIGINS=https://vs.example.com,https://favicon-api.example.com

# Development example (includes local IPs):
# CORS_ORIGINS=https://vs.example.com,http://localhost:8080,http://192.168.1.100:8080

# ============================================
# Cache Configuration
# ============================================

# Maximum number of favicons to cache in memory
CACHE_MAX_SIZE=100

# Cache TTL in seconds (default: 1 hour)
CACHE_TTL=3600

# ============================================
# Rate Limiting
# ============================================

# General API rate limit window in milliseconds (default: 15 minutes)
RATE_LIMIT_WINDOW=900000

# Maximum general API requests per window
RATE_LIMIT_MAX=100

# Notification endpoint rate limit window in milliseconds (default: 1 minute)
RATE_LIMIT_NOTIFICATION_WINDOW=60000

# Maximum notification requests per window (stricter than general API)
RATE_LIMIT_NOTIFICATION_MAX=10

# ============================================
# Admin Access (SECURITY)
# ============================================

# Comma-separated list of IPs allowed to access admin endpoints
# (e.g., /api/clear-cache)
# Default: localhost only (127.0.0.1,::1)
ADMIN_IPS=127.0.0.1,::1

# Admin API key BCRYPT HASH for enhanced security (OPTIONAL but RECOMMENDED)
# SECURITY FIX SEC-002: Store only the bcrypt hash, not plain text
# If set, API key authentication takes precedence over IP whitelist
# Use with Authorization: Bearer <key> header or X-API-Key header
#
# IMPORTANT: This must be a bcrypt hash (60 characters), NOT the plain text key!
# Generate hash with: node -e "console.log(require('bcrypt').hashSync('your-secure-key-here', 10))"
#
# Example workflow:
# 1. Generate a strong API key: openssl rand -base64 32
# 2. Hash it: node -e "console.log(require('bcrypt').hashSync('YOUR_KEY_FROM_STEP_1', 10))"
# 3. Set ADMIN_API_KEY_HASH to the hash from step 2
# 4. Use the original key (from step 1) in API requests
#
# Leave empty to rely solely on IP whitelist (not recommended for production)
#ADMIN_API_KEY_HASH=$2b$10$N9qo8uLOickgx2ZMRZoMyeIjZAgcfl7p92ldGxad68LJZdL17lhWy

# Example with strong API key (hash of "test-key-12345"):
# ADMIN_API_KEY_HASH=$2b$10$examplehashvalue1234567890123456789012345678901234

# ============================================
# Logging
# ============================================

# Log level: error, warn, info, debug
LOG_LEVEL=info

# ============================================
# Favicon Generation
# ============================================

# Comma-separated list of paths to search for existing favicons
# Relative to project root
FAVICON_SEARCH_PATHS=favicon.ico,public/favicon.ico,web/favicon.ico,assets/favicon.ico,static/favicon.ico,src/favicon.ico,dist/favicon.ico

# Comma-separated list of image filenames to use as fallback favicons
FAVICON_IMAGE_PATTERNS=favicon.png,favicon.svg,icon.png,logo.png,logo.svg

# Comma-separated list of directories to search for fallback images
# Leave empty string for root directory
FAVICON_IMAGE_DIRS=,public,assets,static,images,img

# ============================================
# Color Configuration
# ============================================

# Colors for project types (hex format)
COLOR_PROD=#FF6B6B
COLOR_DEV=#4ECDC4
COLOR_STAGING=#FFEAA7
COLOR_TEST=#A29BFE
COLOR_DEMO=#74B9FF
COLOR_RESEARCH=#00B894

# Default color palette for projects without specific type
# Used in hash-based color selection
DEFAULT_COLORS=#FF6B6B,#4ECDC4,#45B7D1,#96CEB4,#FFEAA7,#FD79A8,#A29BFE,#6C5CE7
