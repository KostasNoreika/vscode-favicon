# VS Code Favicon Service Configuration - VM Production
# This is the VM-specific production configuration

# ============================================
# Server Configuration
# ============================================

# Port for the unified service (generates and serves favicons, notifications, and API)
SERVICE_PORT=8024

# Node environment (production for VM deployment)
NODE_ENV=production

# ============================================
# Paths Configuration
# ============================================

# Path to projects registry JSON file
REGISTRY_PATH=/opt/registry/projects.json

# Comma-separated list of allowed base paths for security
# Only projects within these directories can be accessed
ALLOWED_PATHS=/opt/dev,/opt/prod,/opt/research,/opt/tools

# Directory for service data and persistent storage
DATA_DIR=/opt/data/vscode-favicon

# ============================================
# CORS Configuration (SECURITY CRITICAL)
# ============================================

# Comma-separated list of allowed CORS origins
# SECURITY: Only add origins you control and trust
# NO wildcards (*) allowed - explicit origins only
# Format: protocol://domain:port (exact match required)
CORS_ORIGINS=https://vs.noreika.lt,https://favicon-api.noreika.lt

# ============================================
# Cache Configuration
# ============================================

# Maximum number of favicons to cache in memory
CACHE_MAX_SIZE=100

# Cache TTL in seconds (default: 1 hour)
CACHE_TTL=3600

# ============================================
# Rate Limiting
# ============================================

# General API rate limit window in milliseconds (default: 15 minutes)
RATE_LIMIT_WINDOW=900000

# Maximum general API requests per window
RATE_LIMIT_MAX=500

# Notification endpoint rate limit window in milliseconds (default: 1 minute)
RATE_LIMIT_NOTIFICATION_WINDOW=60000

# Maximum notification requests per window (increased for multiple VS Code tabs)
RATE_LIMIT_NOTIFICATION_MAX=60

# ============================================
# Admin Access (SECURITY)
# ============================================

# Comma-separated list of IPs allowed to access admin endpoints
# (e.g., /api/clear-cache)
# Default: localhost only (127.0.0.1,::1)
ADMIN_IPS=127.0.0.1,::1

# Admin API key for enhanced security (OPTIONAL but RECOMMENDED)
# If set, API key authentication takes precedence over IP whitelist
# Use with Authorization: Bearer <key> header
# SECURITY: Use a strong random value (minimum 32 characters)
# Generate with: openssl rand -base64 32
# Leave empty to rely solely on IP whitelist (not recommended for production)
#ADMIN_API_KEY=your-secure-random-key-here

# ============================================
# Logging
# ============================================

# Log level: error, warn, info, debug
LOG_LEVEL=info

# ============================================
# Favicon Generation
# ============================================

# Comma-separated list of paths to search for existing favicons
# Relative to project root
FAVICON_SEARCH_PATHS=favicon.ico,public/favicon.ico,web/favicon.ico,assets/favicon.ico,static/favicon.ico,src/favicon.ico,dist/favicon.ico,app/static/favicon.ico

# Comma-separated list of image filenames to use as fallback favicons
FAVICON_IMAGE_PATTERNS=favicon.png,favicon.svg,icon.png,logo.png,logo.svg

# Comma-separated list of directories to search for fallback images
# Leave empty string for root directory
FAVICON_IMAGE_DIRS=,public,assets,static,images,img

# ============================================
# Color Configuration
# ============================================

# Colors for project types (hex format)
COLOR_PROD=#FF6B6B
COLOR_DEV=#4ECDC4
COLOR_STAGING=#FFEAA7
COLOR_TEST=#A29BFE
COLOR_DEMO=#74B9FF
COLOR_RESEARCH=#00B894

# Default color palette for projects without specific type
# Used in hash-based color selection
DEFAULT_COLORS=#FF6B6B,#4ECDC4,#45B7D1,#96CEB4,#FFEAA7,#FD79A8,#A29BFE,#6C5CE7
